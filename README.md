# Background
Hirers can use Role Requirements, a product facilitating candidate screening during job ad creation. The system suggests up to 5 role requirement questions generated by AI algorithms, continually optimized for better outcomes.

A new Role Requirements recommendation engine has been developed, and the team is conducting an experiment (id = AU-1rr-A/B) to assess its impact on key metrics. The experiment, initiated on June 21st, is anticipated to run for several weeks. 

## Primary Metrics:
### Role Requirements adoption rate 
Indicating the selection of at least one question.

### Average number of questions selected.' 
The analysis is performed at the job level.

## Objective:
Preliminary analysis to provide insights into the ongoing experiment (challenger 'B' vs. champion 'A') involving the new Role Requirements recommendation engine. 

![rainbow](https://github.com/Winxent/portfolio/assets/146320825/5dc438d2-e138-4db0-97a0-e5ae8c3473e8)

# Understanding the Data Set

Combined filtered table:

<img width="889" alt="image" src="https://github.com/Winxent/-Case-Study-Role-Requirements-Recommendation-Engine-Analysis/assets/146320825/2daa912e-56da-4c0f-bddd-e98c2cf341b1">

Hirer_id: 446458

ad_id: 39361797

Date posted: 29th June 2019

Recommendation engine displayed questions and order: As displayed in the table

Selected Questions by hirer: Pre-employment Criteria, Work Availability

Selected order by hire: Work Availability, Pre-employment Criteria

Experiment id: AU-1rr-A/B

Experiment Group: A

Raw data:
https://docs.google.com/spreadsheets/d/1dkjsWNVxcEcjm-Q7F9PuQKqj_ni66tWG/edit?usp=sharing&ouid=107402225492318840480&rtpof=true&sd=true

![rainbow](https://github.com/Winxent/portfolio/assets/146320825/5dc438d2-e138-4db0-97a0-e5ae8c3473e8)

# Data Wrangling

<img width="857" alt="image" src="https://github.com/Winxent/-Case-Study-Role-Requirements-Recommendation-Engine-Analysis/assets/146320825/0bc71536-6bb1-43d0-911c-95066d55754d">

## 1. Inconsistent data entry
* Selected_order should only be populated when is_selected is 1
* Is_selected is 1, but there is no selected_order

<img width="559" alt="image" src="https://github.com/Winxent/-Case-Study-Role-Requirements-Recommendation-Engine-Analysis/assets/146320825/73f7c9a1-bc27-4d96-b986-7d58f72dfcd1">

SQL:
```
UPDATE `CaseStudy.data_combined`
SET is_selected = 0
WHERE selected_order IS NULL;

UPDATE `CaseStudy.data_combined`
SET is_selected = 1
WHERE selected_order IS NOT NULL;
```
## 2. Removing Irrelevant column

* question_version: not a key factor in your analysis.
* question_algorithm_id: Not focusing on the specific algorithms recommending questions.
* job_mode: Which the job ad was new or copy is not crucial for analysis.
* country: only one country
```
ALTER TABLE `CaseStudy.data_role_rec`
DROP COLUMN question_version,
DROP COLUMN question_algorithm_id,
DROP COLUMN job_mode,
DROP COLUMN country;
```
## 3. Combine the tables and create a new table, removing data that are not in the experiment
```
SELECT * FROM
casestudy.data_role_rec r
JOIN casestudy.data_experiment e
ON r.job_id=e.job_id;
```
## 4. Creating additional table for num_questions_selected

Assist in Data Visualisation in Tableau
Assist in calculating Average number of questions

<img width="371" alt="image" src="https://github.com/Winxent/-Case-Study-Role-Requirements-Recommendation-Engine-Analysis/assets/146320825/280db1bd-1e9f-4301-a37a-a683850624b8">
```
SELECT
job_id,
SUM(is_selected) AS num_questions_selected
FROM CaseStudy.data_combined
GROUP BY job_id
HAVING num_questions_selected > 0
```
![rainbow](https://github.com/Winxent/portfolio/assets/146320825/5dc438d2-e138-4db0-97a0-e5ae8c3473e8)

# Analysis

## Role Requirements adoption rate 
<img width="579" alt="image" src="https://github.com/Winxent/-Case-Study-Role-Requirements-Recommendation-Engine-Analysis/assets/146320825/9413eb33-7370-4844-935b-c8952fa625cc">

<img width="565" alt="image" src="https://github.com/Winxent/-Case-Study-Role-Requirements-Recommendation-Engine-Analysis/assets/146320825/acb7d3d4-3d4b-480b-9dbd-5ef371ea2e91">
```
WITH agg AS (
SELECT
intent,
experiment_id,
experiment_group,
COUNT(DISTINCT a.job_id) AS total_jobs,
COUNT(DISTINCT b.Job_id) AS selected_jobs
FROM `CaseStudy.data_combined` a
LEFT JOIN
`CaseStudy.num_questions_selected` b
ON a.job_id = b.job_id
GROUP BY intent,experiment_id,
experiment_group
)
SELECT
intent,
experiment_id,
experiment_group,
selected_jobs / total_jobs AS
adoption_rate
FROM agg
ORDER BY
intent,experiment_id,experiment_group;
```
Firstly, aggregate using a CTE, then divide selected_job / total_jobs to get the adoption rate.

## Average number of questions selected.
<img width="802" alt="image" src="https://github.com/Winxent/-Case-Study-Role-Requirements-Recommendation-Engine-Analysis/assets/146320825/a0ff7f15-ad4e-49ef-8ee8-70662b633ea6">

<img width="536" alt="image" src="https://github.com/Winxent/-Case-Study-Role-Requirements-Recommendation-Engine-Analysis/assets/146320825/0fd63ef7-b201-4714-bbfb-6a209f4a327e">
```
WITH agg AS (
SELECT
job_id,
intent,
experiment_id,
experiment_group
FROM `CaseStudy.data_combined`
GROUP BY job_id,intent,experiment_id,experiment_group
)
SELECT
intent,
experiment_id,
experiment_group,
AVG(num_questions_selected)
FROM agg a
JOIN `CaseStudy.num_questions_selected` n
ON a.job_id = n.job_id
GROUP BY intent,experiment_id, experiment_group
ORDER BY intent,experiment_id, experiment_group
```

# Data Visualisation: 

https://public.tableau.com/views/CaseStudy_17003221354370/CaseStudy?:language=en-US&publish=yes&:display_count=n&:origin=viz_share_link

## Overview




